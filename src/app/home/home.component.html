<form [formGroup]="budgetForm" class="d-flex flex-column align-items-center">
  @for (budget of budgets; track $index) {

  <div class="card custom-card mb-3 p-4 shadow rounded-4 form-check-label">

    <div class="row g-0 align-items-center">
      <div class="col-md-4">
        <h5 class="fw-bold">{{budget.title}}</h5>
        <p>{{budget.description}}</p>
      </div>
      <div class="col-md-4 text-center">
        <div class="card-body">
          <h5 class="card-title fw-bold fs-2">{{budget.price}}€</h5>
        </div>
      </div>
      <div class="form-check col-md-4 d-flex justify-content-center gap-2">
        <label [for]="budget.controlName"></label>
        <input class="form-check-input" type="checkbox" [formControlName]="budget.controlName"
          id="{{budget.controlName}}">
        Afegir
      </div>

      @if (budget.controlName == 'web' && budgetForm.controls['web'].value) {

      <app-panel [counterSignalPages]="counterSignalPages" [counterSignalLanguages]="counterSignalLanguages"
        (counterSignalPagesChange)="onCounterSignalPagesChange(counterSignalPages())"
        (counterSignalLanguagesChange)="onCounterSignalLanguagesChange(counterSignalLanguages())">
      </app-panel>

      }

    </div>

  </div>
}
</form>

<div class="container pt-4 d-flex justify-content-end custom-width">
  <div class="row">
    <div>
      <h2>Preu pressupostat: {{totalPrice}}€</h2>
    </div>
  </div>
</div>


<app-budget-list [totalPrice]="totalPrice" [budgetForm]="budgetForm" [counterSignalPages]="counterSignalPages" [counterSignalLanguages]="counterSignalLanguages"></app-budget-list>
